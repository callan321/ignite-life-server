FROM mcr.microsoft.com/dotnet/sdk:9.0
WORKDIR /src

# Copy solution and project files
COPY IgniteLifeApi.sln ./
COPY IgniteLifeApi/*.csproj IgniteLifeApi/
COPY IgniteLifeApi.Tests/*.csproj IgniteLifeApi.Tests/

# Restore dependencies
RUN dotnet restore

# Copy the rest of the source code
COPY IgniteLifeApi/ IgniteLifeApi/
COPY IgniteLifeApi.Tests/ IgniteLifeApi.Tests/

# Build tests
RUN dotnet build -c Release --no-restore
